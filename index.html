<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Text 2 Emoji — Encrypt / Decrypt</title>
<style>
:root {
  --bg-gradient: linear-gradient(135deg, #22294d 12%, #456bb3 60%, #acb1d6 100%);
  --panel-bg: rgba(255,255,255,0.04);
  --panel-blur: blur(12px);
  --text-color: #fafbfc;
  --muted-color: #a9b2c6;
  --accent-gradient: linear-gradient(135deg, #5f89ff, #ab3bee 80%);
  --error-bg: rgba(255,35,93,0.16);
  --error-text: #ff5d84;
  --border-radius: 15px;
  --faq-q-bg: linear-gradient(88deg,#eaefff 76%,#d4daff 100%);
  --faq-q-hover: linear-gradient(88deg,#dae7ff 80%,#c6d1ff 100%);
  --faq-active-bg: #f7f7fd;
  --faq-icon: #8c96b4;
  --faq-icon-active: #6748b8;
  --faq-a-color: #3e4677;
  --transition: 280ms cubic-bezier(.42, 0, .25, 1);
}

body.light {
  --bg-gradient: linear-gradient(110deg,#dbe7ff 32%, #deeafc 100%);
  --panel-bg: rgba(0,0,0,0.035);
  --text-color: #20232c;
  --muted-color: #7280a7;
  --accent-gradient: linear-gradient(117deg, #527dfe, #8c4ac8 90%);
  --error-text: #d63031;
  --faq-icon: #687bc1;
  --faq-icon-active: #864dd5;
  --faq-q-bg: linear-gradient(88deg,#f6f8ff 70%,#eaf2ff 100%);
  --faq-q-hover: linear-gradient(88deg,#eaf2ff 88%,#deeafc 100%);
  --faq-a-color: #334173;
}

html,body{height:100%;margin:0;background:var(--bg-gradient);color:var(--text-color);transition:background 0.5s,color 0.5s;}
*{box-sizing:border-box;font-family:'Inter',system-ui,sans-serif;}
.wrap{max-width:420px;margin:48px auto 0 auto;padding:32px 2vw 24px 2vw;
  background:var(--panel-bg);backdrop-filter:var(--panel-blur);border-radius:38px;box-shadow:0 2px 32px rgba(0,0,0,0.11);text-align:center;}
h1{font-size:44px;font-weight:700;letter-spacing:-1px;margin:6px 0 18px;text-shadow:0 2px 12px rgba(0,0,0,0.12);}
@media(max-width:600px){h1{font-size:32px;}.wrap{padding:12px 2vw 14px;border-radius:19px;}}

.controls .seg{display:flex;gap:0;background:var(--panel-bg);border-radius:16px;overflow:hidden;margin-bottom:22px;border:1px solid rgba(140,140,140,0.13);}
.seg button{
  flex:1 0 0%;background:transparent;border:0;color:var(--muted-color);
  padding:14px 0;font-size:16px;font-weight:600;transition:all var(--transition);
  border-radius:0;cursor:pointer;outline:none;z-index:1;position:relative;
}
.seg button.active{
  background:var(--accent-gradient);color:white;box-shadow:0 5px 12px -4px #0007;
}

label{display:block;font-weight:500;color:var(--muted-color);margin:14px 0 8px 2px;font-size:15px;text-align:left;}
textarea,input[type=password]{width:100%;background:var(--panel-bg);backdrop-filter:var(--panel-blur);border:1px solid rgba(255,255,255,0.11);
  padding:16px 14px;border-radius:var(--border-radius);color:var(--text-color);resize:vertical;min-height:70px;
  font-size:1rem;box-shadow:0 1px 7px rgba(0,0,0,0.05);transition:var(--transition),border-color 0.2s;
}
textarea:focus,input:focus{outline:none;border-color:#5f89ff;box-shadow:0 0 12px #3c6cfa25;}
input.error,textarea.error{border-color:#ff4d4d !important;box-shadow:0 0 9px #ffcccc7b !important;background:rgba(255,70,70,0.03);}
.btn{display:flex;align-items:center;justify-content:center;gap:10px;
  background:var(--accent-gradient);border:0;padding:14px 0;font-weight:600;font-size:16.7px;
  width:100%;border-radius:var(--border-radius);color:white;cursor:pointer;
  transition:var(--transition);margin-top:15px;box-shadow:0 2px 18px -7px #0007;}
.btn:hover{transform:scale(1.025);}
.btn:active{transform:scale(0.97);}
.btn:disabled{opacity:.7;cursor:not-allowed;}
.result{margin-top:19px;background:var(--panel-bg);backdrop-filter:var(--panel-blur);padding:16px 13px 16px 13px;border-radius:var(--border-radius);word-break:break-word;min-height:48px;box-shadow:0 1.5px 12px #0002;font-size:15px;white-space:pre-wrap;}
.result:empty{min-height:0;padding:0;border:none;box-shadow:none;}
.copy-group{display:flex;gap:9px;margin-top:9px;}
.copyBtn{flex:1 1 0%;padding:10px 2px;border-radius:10px;background:rgba(255,255,255,0.16);border:0;color:var(--muted-color);
  cursor:pointer;transition:var(--transition);font-size:14px;font-weight:600;user-select:none;}
.copyBtn:hover{color:#fff;background:rgba(120,120,255,0.14);}
.copyBtn:active{color:#5f89ff;}
.error{margin-top:8px;padding:10px 14px;background:var(--error-bg);color:var(--error-text);border-radius:8px;font-weight:600;font-size:14px;user-select:none;box-shadow:0 1px 7px #ffcccc36;}
.share-section{margin-top:13px;display:flex;justify-content:center;gap:13px;}
.share-section button{background:transparent;border:none;cursor:pointer;font-size:25px;color:var(--muted-color);transition:color .23s;}
.share-section button:hover{color:#654de6;}
footer{margin-top:28px;color:var(--muted-color);font-size:15px;text-align:center;padding:18px 0 6px;font-weight:500;letter-spacing:.01em;border-top:1px solid rgba(255,255,255,0.07);}
@media(max-width:600px){.share-section{font-size:17px;}footer{padding:11px 0 8px;}}
@keyframes rotate{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}
.rotating{animation:rotate 1s linear infinite;}
#darkModeToggle{position:fixed;top:16px;right:16px;background:var(--panel-bg);border:none;border-radius:20px;
padding:7px 13px;cursor:pointer;color:var(--text-color);font-weight:600;box-shadow:0 2px 10px #0002;}
#darkModeToggle:active{transform:scale(0.97);}
@media(max-width:650px){#darkModeToggle{top:8px;right:8px;padding:7px 13px;font-size:15px;}}

/* FAQ Section Styles */
.faq-section{margin:38px auto 0 auto;max-width:470px;background:var(--faq-q-bg);
  padding:35px 25px 18px 25px;border-radius:28px;box-shadow:0 1px 18px #0003;}
.faq-section h2{margin-top:0;font-size:1.62rem;letter-spacing:-.5px;text-align:left;font-weight:700;margin-bottom:16px;color:#4c5997;}
.faq-list{list-style:none;padding:0;}
.faq-list li{margin:0;padding:0;border-bottom:1px solid #e6e7f3;}
.faq-list li:last-child{border-bottom:none;}
.faq-q{display:flex;align-items:center;justify-content:space-between;
   font-size:1.07rem;padding:13px 0 12px 0;font-weight:600;color:#4c5997;cursor:pointer;
   background:var(--faq-q-bg);border-radius:10px;transition:background .22s;
   letter-spacing:.01em;user-select:none;}
.faq-q:hover{background:var(--faq-q-hover);}
.faq-q .faq-toggle-icon{
  font-size:22px;margin-right:7px;display:inline-block;transition:color .22s,transform .2s;
  color:var(--faq-icon);
}
.faq-list li.active .faq-q .faq-toggle-icon{
  color:var(--faq-icon-active);
  transform:rotate(90deg);
}
.faq-list li.active .faq-q{background:var(--faq-active-bg);}
.faq-a{
  font-size:15.2px;margin:0 0 13px 0;color:var(--faq-a-color);line-height:1.77;
  background:none;padding:7px 0 9px 0;display:none;animation:fadeInActive .33s;
}
.faq-list li.active .faq-a{display:block;}
@keyframes fadeInActive{from{opacity:0;transform:translateY(-8px);}to{opacity:1;transform:translateY(0);}
}
@media(max-width:600px){.faq-section{padding:16px 4vw 13px 4vw;}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
<button id="darkModeToggle" aria-pressed="false">Light Mode</button>
<div class="wrap">
 <h1 id="pageTitle">Text 2 Emoji</h1>
 <div class="controls">
   <div class="seg">
     <button id="tab-encrypt" class="active" type="button">🔒 Encrypt Text</button>
     <button id="tab-decrypt" type="button">🔓 Decrypt Emojis</button>
   </div>
 </div>
 <form id="mainForm" onsubmit="return false;">
   <label id="label-input">1. Type a message</label>
   <textarea id="textInput" autocomplete="off" autocapitalize="off" spellcheck="false" placeholder="Hello World or write some javascript code."></textarea>
   <label>2. Set a password</label>
   <input id="password" type="password" autocomplete="new-password" placeholder="E.g. My$StrongPass123"/>
   <label id="label-action">3. Encrypt message</label>
   <button class="btn" id="actionBtn" type="button">🔒 Encrypt Text</button>
   <div class="result" id="resultBox"></div>
   <div class="copy-group">
     <button class="copyBtn" id="copyBtn" type="button">📋 Copy</button>
     <button class="copyBtn" id="clearBtn" type="button">🧹 Clear</button>
   </div>
   <div id="err" class="error" style="display:none"></div>
 </form>
 <div class="share-section">
   <button id="shareWhatsapp" title="Share on WhatsApp" type="button"><i class="fab fa-whatsapp"></i></button>
   <button id="shareTwitter" title="Share on Twitter" type="button"><i class="fab fa-twitter"></i></button>
   <button id="shareFacebook" title="Share on Facebook" type="button"><i class="fab fa-facebook-f"></i></button>
   <button id="shareEmail" title="Email" type="button"><i class="fas fa-envelope"></i></button>
 </div>
</div>
<!-- FAQ Section Accordion -->
<div class="faq-section">
  <h2>FAQ</h2>
  <ul class="faq-list">
    <li>
      <div class="faq-q">
        <span>What does this app do?</span>
        <span class="faq-toggle-icon"><i class="fa fa-chevron-right"></i></span>
      </div>
      <div class="faq-a">It lets you encrypt any text message into an emoji string with a password, or decrypt back to text using the same password. Only those with the password can recover the original message.</div>
    </li>
    <li>
      <div class="faq-q">
        <span>Is this secure?</span>
        <span class="faq-toggle-icon"><i class="fa fa-chevron-right"></i></span>
      </div>
      <div class="faq-a">Yes: encryption uses AES-GCM (with PBKDF2 key derivation). However, make sure to use a strong password! Anyone with your password and the emoji code can decrypt the message.</div>
    </li>
    <li>
      <div class="faq-q">
        <span>What if I forget my password?</span>
        <span class="faq-toggle-icon"><i class="fa fa-chevron-right"></i></span>
      </div>
      <div class="faq-a">You cannot decrypt the emoji message. There is no password recovery—they never leave your device.</div>
    </li>
    <li>
      <div class="faq-q">
        <span>Why is my text turned into emojis?</span>
        <span class="faq-toggle-icon"><i class="fa fa-chevron-right"></i></span>
      </div>
      <div class="faq-a">Emojis are used as a fun, visual way to encode the encrypted bytes. They don’t reveal any information about your original message.</div>
    </li>
    <li>
      <div class="faq-q">
        <span>How do I share my encrypted message?</span>
        <span class="faq-toggle-icon"><i class="fa fa-chevron-right"></i></span>
      </div>
      <div class="faq-a">Simply copy the emoji string you get and send it to a friend (but keep the password secret!). You can also use the provided share buttons for WhatsApp, Twitter, Facebook, and email.</div>
    </li>
    <li>
      <div class="faq-q">
        <span>Does this store my data?</span>
        <span class="faq-toggle-icon"><i class="fa fa-chevron-right"></i></span>
      </div>
      <div class="faq-a">No—your text, emoji string, and password are processed only in your browser. They are never sent to any server.</div>
    </li>
  </ul>
</div>
<footer>Developed By ❤️ Mahmudul Hussain</footer>
<script>
// FAQ accordion logic
document.querySelectorAll('.faq-q').forEach((el, idx) => {
  el.onclick = function(){
    let li = el.closest('li');
    let isActive = li.classList.contains('active');
    // Close all except current
    document.querySelectorAll('.faq-list li').forEach(lix => lix.classList.remove('active'));
    if(!isActive) li.classList.add('active');
  }
});

const pageTitle=document.getElementById('pageTitle');
const tabEncrypt=document.getElementById('tab-encrypt'),tabDecrypt=document.getElementById('tab-decrypt');
const actionBtn=document.getElementById('actionBtn'),textInput=document.getElementById('textInput');
const passwordInput=document.getElementById('password'),resultBox=document.getElementById('resultBox');
const copyBtn=document.getElementById('copyBtn'),clearBtn=document.getElementById('clearBtn'),errEl=document.getElementById('err');
const labelInput=document.getElementById('label-input'),labelAction=document.getElementById('label-action');
let mode='encrypt';

/* Mode switching */
tabEncrypt.onclick=()=>setMode('encrypt');
tabDecrypt.onclick=()=>setMode('decrypt');
function setMode(m){
  mode=m;
  if(m==='encrypt'){
    tabEncrypt.classList.add('active');tabDecrypt.classList.remove('active');
    labelInput.innerText='1. Type a message';
    labelAction.innerText='3. Encrypt message';
    actionBtn.innerText='🔒 Encrypt Text';
    textInput.placeholder='Hello World or write some javascript code.';
    pageTitle.textContent='Text 2 Emoji';
  } else {
    tabEncrypt.classList.remove('active');tabDecrypt.classList.add('active');
    labelInput.innerText='1. Paste emojis here';
    labelAction.innerText='3. Decrypt emojis';
    actionBtn.innerText='🔓 Decrypt Emojis';
    textInput.placeholder='Paste the emoji string here to decrypt...';
    pageTitle.textContent='Emoji 2 Text';
  }
  textInput.value='';passwordInput.value='';resultBox.innerText='';
  clearErrors();
}

/* Error handling */
function clearErrors(){errEl.style.display='none';errEl.innerText='';textInput.classList.remove('error');passwordInput.classList.remove('error');}
function showError(msg){errEl.style.display='block';errEl.innerText=msg;}

/* Action button */
actionBtn.onclick=async()=>{
  clearErrors();
  const pwd=passwordInput.value.trim(),input=textInput.value.trim();
  if(!pwd){showError('Please enter a password.');passwordInput.classList.add('error');return;}
  if(!input){showError(mode==='encrypt'?'Please enter a message.':'Please paste emojis.');textInput.classList.add('error');return;}
  actionBtn.disabled=true;actionBtn.classList.add('rotating');
  actionBtn.innerText=mode==='encrypt'?'Encrypting…':'Decrypting…';
  try{
    if(mode==='encrypt'){resultBox.innerText=await encryptTextToEmoji(input,pwd);}
    else{resultBox.innerText=await decryptEmojiToText(input,pwd);}
  }catch(e){showError('Operation failed — wrong password or corrupted data.');textInput.classList.add('error');}
  actionBtn.classList.remove('rotating');actionBtn.disabled=false;
  actionBtn.innerText=mode==='encrypt'?'🔒 Encrypt Text':'🔓 Decrypt Emojis';
};

/* Copy and clear */
copyBtn.onclick=async()=>{
  if(!resultBox.innerText){showError('Nothing to copy.');return;}
  await navigator.clipboard.writeText(resultBox.innerText);
  copyBtn.innerText='Copied ✅';setTimeout(()=>copyBtn.innerText='📋 Copy',1400);
};
clearBtn.onclick=()=>{textInput.value='';passwordInput.value='';resultBox.innerText='';clearErrors();};

/* Share buttons */
function getResultEncoded(){return encodeURIComponent(resultBox.innerText.trim());}
document.getElementById('shareWhatsapp').onclick=()=>{if(!resultBox.innerText)return showError('Nothing to share.');window.open(`https://wa.me/?text=${getResultEncoded()}`,'_blank');};
document.getElementById('shareTwitter').onclick=()=>{if(!resultBox.innerText)return showError('Nothing to share.');window.open(`https://twitter.com/intent/tweet?text=${getResultEncoded()}`,'_blank');};
document.getElementById('shareFacebook').onclick=()=>{if(!resultBox.innerText)return showError('Nothing to share.');window.open(`https://www.facebook.com/sharer/sharer.php?u=https://www.google.com/search?q=${getResultEncoded()}`,'_blank');};
document.getElementById('shareEmail').onclick=()=>{if(!resultBox.innerText)return showError('Nothing to share.');window.location.href=`mailto:?subject=${encodeURIComponent("Encrypted Message")}&body=${getResultEncoded()}`;};

/* Theme toggle */
const darkModeToggle=document.getElementById('darkModeToggle');
darkModeToggle.onclick=()=>{
  document.body.classList.toggle('light');
  darkModeToggle.textContent=document.body.classList.contains('light')?'Dark Mode':'Light Mode';
  localStorage.setItem('theme',document.body.classList.contains('light')?'light':'dark');
  darkModeToggle.setAttribute('aria-pressed',document.body.classList.contains('light'));
};
if(localStorage.getItem('theme')==='light'){document.body.classList.add('light');darkModeToggle.textContent='Dark Mode';}

/* Encryption logic */
const base64Alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
const emojiAlphabet=["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😇","🙂","🙃","😍","🥰","😘","😗","😙","😚","🤗","🤩","🤔","🤨","😐","😑","😶","😏","😣","😥","😮","🤐","😯","😪","😫","😴","😌","😛","😜","😝","🤤","😒","😓","😔","😕","🙁","☹️","😖","😞","😤","😢","😭","😦","😧","😨","😩","🤯","😬","😰","😱","🥵","🥶","😳","🤪","😵","🤡","👻","💀"];
const b64ToEmoji={},emojiToB64={};for(let i=0;i<base64Alphabet.length;i++){b64ToEmoji[base64Alphabet[i]]=emojiAlphabet[i];emojiToB64[emojiAlphabet[i]]=base64Alphabet[i];}
function randBytes(len){const b=new Uint8Array(len);crypto.getRandomValues(b);return b;}
async function deriveKeyFromPassword(password,salt){const enc=new TextEncoder();const passKey=await crypto.subtle.importKey('raw',enc.encode(password),'PBKDF2',false,['deriveKey']);return crypto.subtle.deriveKey({name:'PBKDF2',salt:salt,iterations:120000,hash:'SHA-256'},passKey,{name:'AES-GCM',length:256},false,['encrypt','decrypt']);}
function arrayBufferToBase64(buffer){let binary='';const bytes=new Uint8Array(buffer);for(let i=0;i<bytes.length;i+=0x8000){binary+=String.fromCharCode.apply(null,bytes.subarray(i,i+0x8000));}return btoa(binary);}
function base64ToArrayBuffer(base64){const binary=atob(base64);const len=binary.length;const bytes=new Uint8Array(len);for(let i=0;i<len;i++){bytes[i]=binary.charCodeAt(i);}return bytes.buffer;}
function base64ToEmojiString(b64){let out='';for(const ch of b64){out+=b64ToEmoji[ch]||'�';}return out;}
function emojiStringToBase64(str){let b64='',i=0;while(i<str.length){let matched=false;for(const token of emojiAlphabet.slice().sort((a,b)=>b.length-a.length)){if(str.startsWith(token,i)){b64+=emojiToB64[token];i+=token.length;matched=true;break;}}if(!matched)throw new Error('Invalid emoji');}return b64;}
async function encryptTextToEmoji(plaintext,password){const enc=new TextEncoder();const salt=randBytes(16);const iv=randBytes(12);const key=await deriveKeyFromPassword(password,salt);const ptBytes=enc.encode(plaintext);const cipher=await crypto.subtle.encrypt({name:'AES-GCM',iv:iv},key,ptBytes);const combined=new Uint8Array(salt.length+iv.length+cipher.byteLength);combined.set(salt,0);combined.set(iv,salt.length);combined.set(new Uint8Array(cipher),salt.length+iv.length);return base64ToEmojiString(arrayBufferToBase64(combined.buffer));}
async function decryptEmojiToText(emojiString,password){const b64=emojiStringToBase64(emojiString);const buffer=base64ToArrayBuffer(b64);const all=new Uint8Array(buffer);const salt=all.slice(0,16);const iv=all.slice(16,28);const ciphertext=all.slice(28);const key=await deriveKeyFromPassword(password,salt);const plain=await crypto.subtle.decrypt({name:'AES-GCM',iv:iv},key,ciphertext);return new TextDecoder().decode(plain);}
</script>
</body>
</html>

